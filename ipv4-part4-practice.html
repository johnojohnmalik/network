<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IPv4 Part 4: Subnet Mask Practice</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            min-height: 100vh;
            background: #000;
            font-family: 'Rajdhani', sans-serif;
            overflow-x: hidden;
            color: #fff;
        }

        .container {
            width: 100%;
            min-height: 100vh;
            position: relative;
            background: linear-gradient(45deg, #000000, #001a1a);
            overflow: hidden;
            padding: 20px;
        }

        .content {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(0, 255, 255, 0.05);
            padding: 30px;
            border-radius: 15px;
            border: 2px solid #00ffff;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.2);
        }

        h1 {
            color: #00ffff;
            font-family: 'Orbitron', sans-serif;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }

        .question-container {
            display: none;
            margin-bottom: 30px;
        }

        .question-container.active {
            display: block;
        }

        .question {
            background: rgba(0, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(0, 255, 255, 0.3);
            margin-bottom: 20px;
        }

        .question h2 {
            color: #00ffff;
            font-family: 'Orbitron', sans-serif;
            margin-top: 0;
            font-size: 1.5em;
        }

        .hint {
            background: rgba(0, 255, 255, 0.05);
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            border: 1px solid rgba(0, 255, 255, 0.2);
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 15px 0;
        }

        .option {
            background: rgba(0, 255, 255, 0.1);
            padding: 10px 15px;
            border-radius: 5px;
            border: 1px solid rgba(0, 255, 255, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option:hover {
            background: rgba(0, 255, 255, 0.2);
            transform: translateX(5px);
        }

        .option.selected {
            background: rgba(0, 255, 255, 0.3);
            border-color: #00ffff;
        }

        .answer-input {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 255, 255, 0.3);
            color: #00ffff;
            padding: 10px;
            border-radius: 5px;
            width: 100%;
            margin: 10px 0;
            font-family: 'Rajdhani', sans-serif;
        }

        .button-container {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .button {
            padding: 10px 20px;
            background: rgba(0, 255, 255, 0.2);
            border: 2px solid #00ffff;
            color: #fff;
            text-decoration: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Rajdhani', sans-serif;
        }

        .button:hover {
            background: rgba(0, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.4);
        }

        .feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 5px;
            display: none;
            font-weight: bold;
            text-align: center;
            font-size: 1.2em;
        }

        .feedback.correct {
            background: rgba(0, 255, 0, 0.1);
            border: 2px solid #00ff00;
            color: #00ff00;
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
        }

        .feedback.incorrect {
            background: rgba(255, 0, 0, 0.1);
            border: 2px solid #ff0000;
            color: #ff0000;
            box-shadow: 0 0 10px rgba(255, 0, 0, 0.3);
        }

        .option.correct {
            background: rgba(0, 255, 0, 0.2);
            border: 2px solid #00ff00;
            color: #00ff00;
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
        }

        .option.incorrect {
            background: rgba(255, 0, 0, 0.2);
            border: 2px solid #ff0000;
            color: #ff0000;
            box-shadow: 0 0 10px rgba(255, 0, 0, 0.3);
        }

        .answer-input.correct {
            border: 2px solid #00ff00;
            color: #00ff00;
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
        }

        .answer-input.incorrect {
            border: 2px solid #ff0000;
            color: #ff0000;
            box-shadow: 0 0 10px rgba(255, 0, 0, 0.3);
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: rgba(0, 255, 255, 0.1);
            border-radius: 2px;
            margin-bottom: 20px;
        }

        .progress {
            height: 100%;
            background: #00ffff;
            border-radius: 2px;
            transition: width 0.3s ease;
        }

        .question-number {
            color: #00ffff;
            text-align: center;
            margin-bottom: 20px;
            font-family: 'Orbitron', sans-serif;
        }

        .answer-methods {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin: 20px 0;
        }

        .method {
            background: rgba(0, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(0, 255, 255, 0.2);
        }

        .method h3 {
            color: #00ffff;
            margin-top: 0;
            margin-bottom: 15px;
            font-family: 'Orbitron', sans-serif;
        }

        .submit-button {
            padding: 12px 24px;
            background: rgba(0, 255, 255, 0.2);
            border: 2px solid #00ffff;
            color: #fff;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Rajdhani', sans-serif;
            font-size: 1.1em;
            transition: all 0.3s ease;
            margin: 20px 0;
        }

        .submit-button:hover {
            background: rgba(0, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.4);
        }

        .submit-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        #next-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            background: rgba(0, 255, 255, 0.1);
        }

        #next-button:not(:disabled) {
            opacity: 1;
            cursor: pointer;
            background: rgba(0, 255, 255, 0.2);
        }

        /* Celebration Styles */
        .celebration-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
            display: none;
        }

        .celebration-container.active {
            display: block;
        }

        .cyber-firework {
            position: absolute;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            animation: cyber-explode 1s ease-out forwards;
        }

        @keyframes cyber-explode {
            0% {
                transform: scale(1);
                opacity: 1;
                box-shadow: 0 0 0 0 rgba(0, 255, 255, 0.4);
            }
            100% {
                transform: scale(20);
                opacity: 0;
                box-shadow: 0 0 20px 20px rgba(0, 255, 255, 0);
            }
        }

        .streak-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #00ffff;
            padding: 20px 40px;
            border-radius: 10px;
            text-align: center;
            opacity: 0;
            animation: message-appear 2.2s ease-in-out forwards;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
        }

        @keyframes message-appear {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.8);
            }
            20% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1.1);
            }
            30% {
                transform: translate(-50%, -50%) scale(1);
            }
            80% {
                opacity: 1;
            }
            100% {
                opacity: 0;
            }
        }

        .streak-number {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5em;
            color: #00ffff;
            margin: 0;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }

        .cyber-title {
            font-family: 'Rajdhani', sans-serif;
            font-size: 1.5em;
            color: #fff;
            margin: 10px 0 0 0;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
        }

        /* Badge Styles */
        .badge-notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid #00ffff;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            z-index: 2000;
            display: none;
            animation: badge-appear 3s ease-in-out forwards;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
        }

        @keyframes badge-appear {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.8);
            }
            20% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1.1);
            }
            30% {
                transform: translate(-50%, -50%) scale(1);
            }
            80% {
                opacity: 1;
            }
            100% {
                opacity: 0;
            }
        }

        .badge-image {
            width: 100px;
            height: 100px;
            margin-bottom: 15px;
            filter: drop-shadow(0 0 10px rgba(0, 255, 255, 0.5));
        }

        .badge-title {
            font-family: 'Orbitron', sans-serif;
            color: #00ffff;
            font-size: 1.5em;
            margin: 0 0 10px 0;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }

        .badge-description {
            color: #fff;
            font-family: 'Rajdhani', sans-serif;
            margin: 0;
        }

        .continue-practicing-section {
            margin-top: 30px;
            padding: 20px;
            background: rgba(255, 0, 255, 0.05);
            border: 1px solid rgba(255, 0, 255, 0.3);
            border-radius: 10px;
            text-align: center;
        }

        .continue-practicing-text {
            font-weight: bold;
            color: #fff;
            font-size: 1.1em;
            margin-bottom: 15px;
            font-family: 'Rajdhani', sans-serif;
        }

        .continue-practicing-button {
            padding: 12px 25px;
            background: rgba(255, 0, 255, 0.2);
            border: 2px solid var(--accent-color);
            color: #fff;
            text-decoration: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Rajdhani', sans-serif;
            font-size: 1em;
            display: inline-block;
        }

        .continue-practicing-button:hover {
            background: rgba(255, 0, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 0 15px rgba(255, 0, 255, 0.4);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="content">
            <h1>Subnet Mask Practice</h1>
            <div class="progress-bar">
                <div class="progress" style="width: 0%"></div>
            </div>
            <div class="question-number">Question 1 of 30</div>

            <div id="questions-container">
                <!-- Questions will be dynamically inserted here -->
            </div>

            <div class="button-container">
                <button class="button" onclick="window.location.href='ipv4-part4.html'">Back to Module</button>
                <button class="button" id="next-button" onclick="nextQuestion()">Next Question</button>
            </div>
        </div>
    </div>

    <!-- Celebration Container -->
    <div class="celebration-container" id="celebration-container">
        <div class="streak-message" id="streak-message">
            <h2 class="streak-number" id="streak-number"></h2>
            <p class="cyber-title" id="cyber-title"></p>
        </div>
    </div>

    <!-- Badge Notification -->
    <div class="badge-notification" id="badge-notification">
        <img id="badge-image" class="badge-image" src="" alt="Achievement Badge">
        <h2 class="badge-title" id="badge-title"></h2>
        <p class="badge-description" id="badge-description"></p>
    </div>

    <script src="progress-bar.js"></script>
    <script src="js/script.js"></script>
    <script src="js/home-button.js"></script>
    <script>
        const questions = [
            {
                type: 'multiple-choice',
                question: 'What is the network address of 192.168.90.77/20?',
                hint: '/20 means the first 20 bits are the Network ID. Look at the 3rd octet, find the jump value using the subnet chart, round down to nearest multiple.',
                options: [
                    '192.168.80.0',
                    '192.168.64.0',
                    '192.168.90.0',
                    '192.168.0.0'
                ],
                correctAnswer: '192.168.80.0',
                explanation: 'The /20 means we need to look at the third octet. The jump value for /20 is 16, so we round 90 down to the nearest multiple of 16, which is 80.'
            },
            {
                type: 'multiple-choice',
                question: 'A subnet mask tells us how much of an IP address belongs to the ___________ and how much to the ___________.',
                hint: 'Think about the two main parts of an IP address - one identifies the network, the other identifies the device.',
                options: [
                    'network, host',
                    'subnet, device',
                    'router, computer',
                    'gateway, endpoint'
                ],
                correctAnswer: 'network, host',
                explanation: 'The subnet mask separates the IP address into two parts: the network portion (which identifies the network) and the host portion (which identifies the specific device on that network).'
            },
            {
                type: 'multiple-choice',
                question: 'What is the CIDR notation for the subnet mask 255.255.255.0?',
                hint: 'Count the number of 1s in the binary representation of the subnet mask.',
                options: [
                    '/24',
                    '/16',
                    '/8',
                    '/32'
                ],
                correctAnswer: '/24',
                explanation: '255.255.255.0 has 24 bits set to 1, so it\'s written as /24 in CIDR notation.'
            },
            {
                type: 'multiple-choice',
                question: 'How many usable hosts are available in a /26 subnet?',
                hint: 'Remember to subtract 2 from the total number of hosts (network and broadcast addresses).',
                options: [
                    '62',
                    '64',
                    '126',
                    '128'
                ],
                correctAnswer: '62',
                explanation: 'A /26 has 6 bits for hosts (32-26=6). 2^6 = 64 total addresses. Subtract 2 for network and broadcast addresses, leaving 62 usable hosts.'
            },
            {
                type: 'multiple-choice',
                question: 'What is the subnet mask for /28 in decimal notation?',
                hint: 'Convert the first 28 bits to 1s and the rest to 0s, then convert to decimal.',
                options: [
                    '255.255.255.240',
                    '255.255.255.248',
                    '255.255.255.224',
                    '255.255.255.252'
                ],
                correctAnswer: '255.255.255.240',
                explanation: '/28 means the first 28 bits are 1s. This translates to 255.255.255.240 in decimal.'
            },
            {
                type: 'multiple-choice',
                question: 'What is the network address for 10.10.128.55/17?',
                hint: 'The jump value for /17 is 128 in the third octet.',
                options: [
                    '10.10.128.0',
                    '10.10.0.0',
                    '10.10.64.0',
                    '10.10.192.0'
                ],
                correctAnswer: '10.10.128.0',
                explanation: '/17 means we look at the third octet. The jump value is 128, so the network starts at 128.'
            },
            {
                type: 'multiple-choice',
                question: 'Which subnet mask would you use to create subnets with exactly 30 usable hosts each?',
                hint: 'You need enough bits to accommodate 30 hosts plus 2 reserved addresses.',
                options: [
                    '/27',
                    '/26',
                    '/28',
                    '/25'
                ],
                correctAnswer: '/27',
                explanation: '/27 gives you 5 bits for hosts (2^5 = 32 addresses). Subtract 2 for network and broadcast, leaving 30 usable hosts.'
            },
            {
                type: 'multiple-choice',
                question: 'What is the broadcast address for the network 192.168.64.0/26?',
                hint: 'The broadcast address is the last address in the subnet.',
                options: [
                    '192.168.64.63',
                    '192.168.64.255',
                    '192.168.64.127',
                    '192.168.64.31'
                ],
                correctAnswer: '192.168.64.63',
                explanation: '/26 has a block size of 64. The network is 192.168.64.0, so the broadcast is 192.168.64.63 (64-1).'
            },
            {
                type: 'multiple-choice',
                question: 'What is the first usable IP address in the subnet 172.16.32.0/27?',
                hint: 'The first usable address is one more than the network address.',
                options: [
                    '172.16.32.1',
                    '172.16.32.0',
                    '172.16.32.2',
                    '172.16.32.32'
                ],
                correctAnswer: '172.16.32.1',
                explanation: 'The network address is 172.16.32.0, so the first usable host address is 172.16.32.1.'
            },
            {
                type: 'multiple-choice',
                question: 'What is the last usable IP address in the subnet 10.0.0.0/24?',
                hint: 'The last usable address is one less than the broadcast address.',
                options: [
                    '10.0.0.254',
                    '10.0.0.255',
                    '10.0.0.253',
                    '10.0.0.252'
                ],
                correctAnswer: '10.0.0.254',
                explanation: 'The broadcast address is 10.0.0.255, so the last usable host address is 10.0.0.254.'
            },
            {
                type: 'multiple-choice',
                question: 'What is the binary representation of the subnet mask /19?',
                hint: 'Convert the first 19 bits to 1s and the rest to 0s.',
                options: [
                    '11111111.11111111.11100000.00000000',
                    '11111111.11111111.11110000.00000000',
                    '11111111.11111111.11000000.00000000',
                    '11111111.11111111.11111000.00000000'
                ],
                correctAnswer: '11111111.11111111.11100000.00000000',
                explanation: '/19 means the first 19 bits are 1s, and the rest are 0s.'
            },
            {
                type: 'multiple-choice',
                question: 'What is the network address for 192.168.45.200 with subnet mask 255.255.192.0?',
                hint: 'Convert the subnet mask to CIDR and find the jump value.',
                options: [
                    '192.168.0.0',
                    '192.168.64.0',
                    '192.168.128.0',
                    '192.168.192.0'
                ],
                correctAnswer: '192.168.0.0',
                explanation: '255.255.192.0 is /18. The jump value is 64, so we round 45 down to 0.'
            },
            {
                type: 'multiple-choice',
                question: 'How many subnets can you create with a /26 subnet mask from a /24 network?',
                hint: 'Count how many bits were borrowed from the host portion.',
                options: [
                    '4',
                    '2',
                    '8',
                    '16'
                ],
                correctAnswer: '4',
                explanation: 'Borrowing 2 bits (26-24=2) gives us 2^2 = 4 subnets.'
            },
            {
                type: 'multiple-choice',
                question: 'What is the subnet mask for a network that needs to support 1000 hosts?',
                hint: 'You need enough bits to accommodate 1000 hosts plus 2 reserved addresses.',
                options: [
                    '/22',
                    '/21',
                    '/23',
                    '/24'
                ],
                correctAnswer: '/22',
                explanation: 'You need at least 10 bits for hosts (2^10 = 1024 addresses). 32-10 = 22, so the subnet mask is /22.'
            },
            {
                type: 'multiple-choice',
                question: 'What is the broadcast address for 172.16.45.200/26?',
                hint: 'Find the network address first, then add the block size minus 1.',
                options: [
                    '172.16.45.255',
                    '172.16.45.191',
                    '172.16.45.127',
                    '172.16.45.63'
                ],
                correctAnswer: '172.16.45.255',
                explanation: '/26 has a block size of 64. The network is 172.16.45.192, so the broadcast is 172.16.45.255.'
            },
            {
                type: 'multiple-choice',
                question: 'What is the first usable IP address in the subnet 192.168.100.64/27?',
                hint: 'The first usable address is one more than the network address.',
                options: [
                    '192.168.100.65',
                    '192.168.100.64',
                    '192.168.100.66',
                    '192.168.100.63'
                ],
                correctAnswer: '192.168.100.65',
                explanation: 'The network address is 192.168.100.64, so the first usable host address is 192.168.100.65.'
            },
            {
                type: 'multiple-choice',
                question: 'What is the last usable IP address in the subnet 10.10.10.128/26?',
                hint: 'The last usable address is one less than the broadcast address.',
                options: [
                    '10.10.10.190',
                    '10.10.10.191',
                    '10.10.10.189',
                    '10.10.10.192'
                ],
                correctAnswer: '10.10.10.190',
                explanation: 'The broadcast address is 10.10.10.191, so the last usable host address is 10.10.10.190.'
            },
            {
                type: 'multiple-choice',
                question: 'What is the network address for 172.16.45.200/18?',
                hint: 'The jump value for /18 is 64 in the third octet.',
                options: [
                    '172.16.0.0',
                    '172.16.64.0',
                    '172.16.128.0',
                    '172.16.192.0'
                ],
                correctAnswer: '172.16.0.0',
                explanation: '/18 means we look at the third octet. The jump value is 64, so we round 45 down to 0.'
            },
            {
                type: 'multiple-choice',
                question: 'What is the subnet mask for a network that needs to support 50 hosts?',
                hint: 'You need enough bits to accommodate 50 hosts plus 2 reserved addresses.',
                options: [
                    '/26',
                    '/25',
                    '/27',
                    '/28'
                ],
                correctAnswer: '/26',
                explanation: 'You need at least 6 bits for hosts (2^6 = 64 addresses). 32-6 = 26, so the subnet mask is /26.'
            },
            {
                type: 'multiple-choice',
                question: 'What is the broadcast address for 192.168.100.0/25?',
                hint: 'Find the network address first, then add the block size minus 1.',
                options: [
                    '192.168.100.127',
                    '192.168.100.255',
                    '192.168.100.128',
                    '192.168.100.126'
                ],
                correctAnswer: '192.168.100.127',
                explanation: '/25 has a block size of 128. The network is 192.168.100.0, so the broadcast is 192.168.100.127.'
            },
            {
                type: 'multiple-choice',
                question: 'What is the first usable IP address in the subnet 10.0.0.0/28?',
                hint: 'The first usable address is one more than the network address.',
                options: [
                    '10.0.0.1',
                    '10.0.0.0',
                    '10.0.0.2',
                    '10.0.0.16'
                ],
                correctAnswer: '10.0.0.1',
                explanation: 'The network address is 10.0.0.0, so the first usable host address is 10.0.0.1.'
            },
            {
                type: 'multiple-choice',
                question: 'What is the last usable IP address in the subnet 172.16.0.0/24?',
                hint: 'The last usable address is one less than the broadcast address.',
                options: [
                    '172.16.0.254',
                    '172.16.0.255',
                    '172.16.0.253',
                    '172.16.0.252'
                ],
                correctAnswer: '172.16.0.254',
                explanation: 'The broadcast address is 172.16.0.255, so the last usable host address is 172.16.0.254.'
            },
            {
                type: 'multiple-choice',
                question: 'What is the network address for 192.168.45.200/27?',
                hint: 'The jump value for /27 is 32 in the fourth octet.',
                options: [
                    '192.168.45.192',
                    '192.168.45.160',
                    '192.168.45.224',
                    '192.168.45.128'
                ],
                correctAnswer: '192.168.45.192',
                explanation: '/27 means we look at the fourth octet. The jump value is 32, so we round 200 down to 192.'
            },
            {
                type: 'multiple-choice',
                question: 'What is the subnet mask for a network that needs to support 2000 hosts?',
                hint: 'You need enough bits to accommodate 2000 hosts plus 2 reserved addresses.',
                options: [
                    '/21',
                    '/20',
                    '/22',
                    '/23'
                ],
                correctAnswer: '/21',
                explanation: 'You need at least 11 bits for hosts (2^11 = 2048 addresses). 32-11 = 21, so the subnet mask is /21.'
            },
            {
                type: 'multiple-choice',
                question: 'What is the broadcast address for 10.10.10.0/28?',
                hint: 'Find the network address first, then add the block size minus 1.',
                options: [
                    '10.10.10.15',
                    '10.10.10.16',
                    '10.10.10.14',
                    '10.10.10.31'
                ],
                correctAnswer: '10.10.10.15',
                explanation: '/28 has a block size of 16. The network is 10.10.10.0, so the broadcast is 10.10.10.15.'
            },
            {
                type: 'multiple-choice',
                question: 'What is the first usable IP address in the subnet 192.168.1.0/26?',
                hint: 'The first usable address is one more than the network address.',
                options: [
                    '192.168.1.1',
                    '192.168.1.0',
                    '192.168.1.2',
                    '192.168.1.64'
                ],
                correctAnswer: '192.168.1.1',
                explanation: 'The network address is 192.168.1.0, so the first usable host address is 192.168.1.1.'
            },
            {
                type: 'multiple-choice',
                question: 'What is the last usable IP address in the subnet 172.16.10.0/27?',
                hint: 'The last usable address is one less than the broadcast address.',
                options: [
                    '172.16.10.30',
                    '172.16.10.31',
                    '172.16.10.29',
                    '172.16.10.32'
                ],
                correctAnswer: '172.16.10.30',
                explanation: 'The broadcast address is 172.16.10.31, so the last usable host address is 172.16.10.30.'
            },
            {
                type: 'multiple-choice',
                question: 'What is the network address for 10.10.10.200/28?',
                hint: 'The jump value for /28 is 16 in the fourth octet.',
                options: [
                    '10.10.10.192',
                    '10.10.10.176',
                    '10.10.10.208',
                    '10.10.10.160'
                ],
                correctAnswer: '10.10.10.192',
                explanation: '/28 means we look at the fourth octet. The jump value is 16, so we round 200 down to 192.'
            },
            {
                type: 'multiple-choice',
                question: 'What is the subnet mask for a network that needs to support 100 hosts?',
                hint: 'You need enough bits to accommodate 100 hosts plus 2 reserved addresses.',
                options: [
                    '/25',
                    '/24',
                    '/26',
                    '/27'
                ],
                correctAnswer: '/25',
                explanation: 'You need at least 7 bits for hosts (2^7 = 128 addresses). 32-7 = 25, so the subnet mask is /25.'
            },
            {
                type: 'multiple-choice',
                question: 'What is the broadcast address for 172.16.0.0/26?',
                hint: 'Find the network address first, then add the block size minus 1.',
                options: [
                    '172.16.0.63',
                    '172.16.0.64',
                    '172.16.0.62',
                    '172.16.0.127'
                ],
                correctAnswer: '172.16.0.63',
                explanation: '/26 has a block size of 64. The network is 172.16.0.0, so the broadcast is 172.16.0.63.'
            }
        ];

        let currentQuestion = 0;
        let score = 0;

        // Cyber Titles Array
        const cyberTitles = [
            "Firewall Whisperer",
            "Patch Master",
            "Digital Ninja",
            "The Exploit Exorcist",
            "Byte Guardian",
            "Root Access Royalty",
            "Crypto Commander",
            "Phish Slayer",
            "Zero-Day Hero",
            "The Encryptor",
            "Net Sentinel",
            "Red Team Rockstar",
            "The Bug Hunter",
            "Token Titan",
            "Cyber Sage",
            "Packet Paladin",
            "Malware Mercenary",
            "The Boolean Boss",
            "Code Shield",
            "The Kernel Keeper"
        ];

        let streak = 0;

        function createFirework(x, y) {
            const firework = document.createElement('div');
            firework.className = 'cyber-firework';
            firework.style.left = x + 'px';
            firework.style.top = y + 'px';
            firework.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
            document.getElementById('celebration-container').appendChild(firework);
            
            setTimeout(() => {
                firework.remove();
            }, 1000);
        }

        function triggerCelebration() {
            const container = document.getElementById('celebration-container');
            const streakNumber = document.getElementById('streak-number');
            const cyberTitle = document.getElementById('cyber-title');
            
            // Set streak message
            streakNumber.textContent = `Streak ${streak}!`;
            cyberTitle.textContent = cyberTitles[Math.floor(Math.random() * cyberTitles.length)];
            
            // Show celebration
            container.classList.add('active');
            
            // Create fireworks
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const x = Math.random() * window.innerWidth;
                    const y = Math.random() * window.innerHeight;
                    createFirework(x, y);
                }, i * 100);
            }
            
            // Hide celebration after 2.2 seconds
            setTimeout(() => {
                container.classList.remove('active');
            }, 2200);
        }

        function displayQuestion(index) {
            const question = questions[index];
            const container = document.getElementById('questions-container');
            
            // Clear container
            container.innerHTML = '';
            
            let html = `
                <div class="question">
                    <h2>🔹 Question ${index + 1}</h2>
                    <p>${question.question}</p>
                    ${question.hint ? `<div class="hint">🛠️ Hint: ${question.hint}</div>` : ''}
                    <div class="options">
            `;
            
            question.options.forEach(option => {
                html += `
                    <div class="option" onclick="selectOption(this, '${option}')">
                        ${option}
                    </div>
                `;
            });
            
            html += `
                    </div>
                    <div class="feedback"></div>
                    <div class="answer-info" style="display: none; margin-top: 15px; padding: 15px; background: rgba(0, 255, 255, 0.1); border-radius: 5px; border: 1px solid rgba(0, 255, 255, 0.3);">
                        <p style="color: #00ffff; margin: 0 0 10px 0;">Answer: ${question.correctAnswer}</p>
                        <p style="margin: 0;">${question.explanation}</p>
                    </div>
                </div>
            `;
            
            container.innerHTML = html;
            document.getElementById('next-button').disabled = true;
            updateProgress();
        }

        function selectOption(element, value) {
            const question = questions[currentQuestion];
            const options = element.parentElement.getElementsByClassName('option');
            const feedback = element.closest('.question').querySelector('.feedback');
            const answerInfo = element.closest('.question').querySelector('.answer-info');
            
            // Clear previous states
            Array.from(options).forEach(option => {
                option.classList.remove('selected', 'correct', 'incorrect');
            });
            
            // Mark selected option
            element.classList.add('selected');
            
            // Check if answer is correct
            const isCorrect = value === question.correctAnswer;
            
            // Mark correct answer in green
            Array.from(options).forEach(option => {
                if (option.textContent === question.correctAnswer) {
                    option.classList.add('correct');
                }
            });
            
            // If wrong, mark selected answer in red
            if (!isCorrect) {
                element.classList.add('incorrect');
                streak = 0; // Reset streak on wrong answer
            } else {
                streak++; // Increment streak on correct answer
                if (streak % 5 === 0) { // Check if streak is multiple of 5
                    triggerCelebration();
                }
            }
            
            // Show feedback
            feedback.style.display = 'block';
            feedback.className = `feedback ${isCorrect ? 'correct' : 'incorrect'}`;
            
            // Always enable the next button regardless of answer
            const nextButton = document.getElementById('next-button');
            nextButton.disabled = false;
            console.log('Next button enabled:', nextButton.disabled);
            
            // Add a small delay to ensure the button state is properly updated
            setTimeout(() => {
                nextButton.disabled = false;
                console.log('Next button state after delay:', nextButton.disabled);
            }, 100);
            
            if (isCorrect) {
                feedback.innerHTML = `✅ Correct! Great job.`;
                answerInfo.style.display = 'block';
                score++;
            } else {
                feedback.innerHTML = `
                    ❌ Incorrect. 
                    <p>Your answer: "${value}"</p>
                    <p>You can still proceed to the next question.</p>
                `;
                answerInfo.style.display = 'block';
            }
        }

        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                displayQuestion(currentQuestion);
                document.querySelector('.question-number').textContent = `Question ${currentQuestion + 1} of ${questions.length}`;
            } else {
                showResults();
            }
        }

        function updateProgress() {
            const progress = (currentQuestion / questions.length) * 100;
            document.querySelector('.progress').style.width = `${progress}%`;
        }

        // Badge System
        const badges = {
            readingCompletion: {
                id: 'reading-completion',
                title: 'Reading Completion Badge',
                description: 'Completed the Subnet Mask learning module!',
                icon: 'BADGE ICONS/11.png',
                earned: false
            },
            quizMaster: {
                id: 'quiz-master',
                title: 'Quiz Master Badge',
                description: 'Scored over 75% on the Subnet Mask practice quiz!',
                icon: 'BADGE ICONS/10.png',
                earned: false
            }
        };

        function showBadge(badgeId) {
            const badge = badges[badgeId];
            if (!badge || badge.earned) return;

            const notification = document.getElementById('badge-notification');
            const badgeImage = document.getElementById('badge-image');
            const badgeTitle = document.getElementById('badge-title');
            const badgeDescription = document.getElementById('badge-description');

            badgeImage.src = badge.icon;
            badgeTitle.textContent = badge.title;
            badgeDescription.textContent = badge.description;

            notification.style.display = 'block';
            badge.earned = true;

            // Hide notification after 3 seconds
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        function showResults() {
            const container = document.getElementById('questions-container');
            const percentage = (score / questions.length) * 100;
            
            container.innerHTML = `
                <div class="question">
                    <h2>🎉 Practice Complete!</h2>
                    <p>Your score: ${score} out of ${questions.length} (${percentage.toFixed(1)}%)</p>
                    <div class="button-container">
                        <button class="button" onclick="window.location.href='ipv4-part4.html'">Back to Module</button>
                        <button class="button" onclick="restartPractice()">Try Again</button>
                    </div>
                    
                    <div class="continue-practicing-section">
                        <p class="continue-practicing-text"><strong>If you're still not confident in your ability and want to keep practicing, click here:</strong></p>
                        <a href="https://subnetipv4.com/" target="_blank" class="continue-practicing-button">Continue Practicing Subnet Masks</a>
                    </div>
                </div>
            `;

            // Check for Quiz Master badge
            if (percentage >= 75) {
                showBadge('quizMaster');
            }
        }

        function restartPractice() {
            currentQuestion = 0;
            score = 0;
            displayQuestion(0);
        }

        // Check for Reading Completion badge when page loads
        window.addEventListener('load', () => {
            console.log('Practice page loaded');
            // Check if user has completed reading the module
            const hasCompletedReading = sessionStorage.getItem('subnetMaskReadingCompleted') === 'true';
            console.log('Reading completion status:', hasCompletedReading);
            console.log('Raw sessionStorage value:', sessionStorage.getItem('subnetMaskReadingCompleted'));
            
            // Removed badge trigger - no longer showing reading completion badge when starting practice
            // if (hasCompletedReading) {
            //     console.log('Showing reading completion badge');
            //     showBadge('readingCompletion');
            //     // Clear the flag to prevent showing the badge again
            //     sessionStorage.removeItem('subnetMaskReadingCompleted');
            //     console.log('Flag cleared');
            // }
        });

        // Initialize the first question
        displayQuestion(0);
    </script>
</body>
</html> 